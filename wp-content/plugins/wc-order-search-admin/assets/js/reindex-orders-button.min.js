!function(a){function b(){g.attr("disabled","disabled"),j=!0,c(0),d(g.data("nonce"))}function c(a){g.text("Processing, please be patient ... "+a+"%")}function d(b){var g={action:"wc_osa_reindex",page:h,_wpnonce:b};a.post(ajaxurl,g,function(a){return"undefined"!=typeof a.success&&a.success===!1?(alert("An error occurred: "+a.data.message),void f()):"undefined"==typeof a.recordsPushedCount?(alert("You should first configure your Algolia account settings."),void f()):(i+=a.recordsPushedCount,progress=Math.round(h/a.totalPagesCount*100),c(progress),void(a.finished!==!0?(h++,d(b)):e()))}).fail(function(a){alert("An error occurred. Please try again.")})}function e(){alert("Successfully indexed "+i+" orders!"),f()}function f(){i=0,h=1,j=!1,g.text("Re-index orders"),g.removeAttr("disabled")}var g=a(".aos-reindex-button"),h=1,i=0,j=!1;g.on("click",b),a(window).on("beforeunload",function(){if(j===!0)return"If you leave now, re-indexing will be aborted."})}(jQuery);